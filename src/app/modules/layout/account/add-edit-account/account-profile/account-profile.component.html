<form #profileForm="ngForm" (ngSubmit)="$event.preventDefault()">
  <div class="scrollbar-thin scrollbar-thumb-gray-950 max-h-[500px] space-y-6 overflow-y-auto p-2">
    <!-- Profile Image Section -->
    <div class="mb-4">
      <div class="relative inline-block">
        <img
          [src]="localProfileData.profilePicture || 'assets/logo/dummy-avatar.jpg'"
          alt="Profile"
          class="h-32 w-32 rounded-full border-2 border-gray-600 object-cover" />
      </div>

      <div class="mt-3 flex items-center gap-2">
        <button type="button" (click)="onUpload()" class="bg-primary rounded-md px-4 py-2.5 text-white">Upload</button>
      </div>
    </div>

    <div class="space-y-6">
      <!-- Company Name -->
      <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
        <div>
          <h3 class="text-sm font-medium text-white">Company Name *</h3>

          <input
            type="text"
            name="companyName"
            required
            [(ngModel)]="localProfileData.companyName"
            #companyName="ngModel"
            class="bg-gray-950 w-full rounded-md border border-gray-600 p-3 text-white" />

          @if (companyName.invalid && (companyName.touched || companyName.dirty)) {
          <p class="text-white-400 mt-1 text-xs">Company name is required.</p>
          }
        </div>

        <!-- Email -->
        <div>
          <h3 class="text-sm font-medium text-white">Email *</h3>

          <input
            type="email"
            name="email"
            required
            [(ngModel)]="localProfileData.email"
            #email="ngModel"
            (input)="validateEmail()"
            class="bg-gray-950 w-full rounded-md border border-gray-600 p-3 text-white" />

          @if (email.invalid && (email.touched || email.dirty)) {
          <p class="text-white-400 mt-1 text-xs">Email is required.</p>
          } @if (emailError && (email.touched || email.dirty)) {
          <p class="text-white-400 mt-1 text-xs">{{ emailError }}</p>
          }
        </div>
      </div>

      <!-- Tags -->
      @if (isEditMode) {
      <div>
        <h3 class="text-sm font-medium text-white">Tags</h3>

        <div class="bg-gray-950 flex flex-wrap gap-2 rounded-md border border-gray-600 p-3">
          @for (tag of localProfileData.tags; track $index; let i = $index) {
          <span class="flex items-center gap-1 rounded-full bg-gray-800 px-2 py-1 text-xs text-gray-300">
            {{ tag }}
            <button type="button" (click)="removeTag(i)" class="hover:text-white-400">
              <svg-icon src="assets/icons/heroicons/outline/x.svg" [svgClass]="'h-3 w-3'"></svg-icon>
            </button>
          </span>
          }

          <input
            type="text"
            [(ngModel)]="newTag"
            (keydown.enter)="addTag($event)"
            (keydown)="handleComma($event)"
            placeholder="Add Tag"
            class="bg-gray-950 flex-1 text-white outline-none" />
        </div>
      </div>
      }

      <!-- Phone Section -->
      @if (isEditMode) {
      <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
        <!-- Phone 1 -->
        <div>
          <h3 class="text-sm font-medium text-white">Phone Number 1 *</h3>

          <input
            type="text"
            name="phone1"
            required
            maxlength="15"
            [(ngModel)]="localProfileData.phone1"
            #phone1="ngModel"
            (input)="validatePhone('phone1')"
            class="bg-gray-950 w-full rounded-md border border-gray-600 p-3 text-white" />

          @if (phone1.invalid && (phone1.touched || phone1.dirty)) {
          <p class="text-white-400 mt-1 text-xs">Phone number is required.</p>
          } @if (phone1Error && (phone1.touched || phone1.dirty)) {
          <p class="text-white-400 mt-1 text-xs">{{ phone1Error }}</p>
          }
        </div>

        <!-- Phone 2 -->
        <div>
          <h3 class="text-sm font-medium text-white">Phone Number 2</h3>

          <input
            type="text"
            maxlength="15"
            [(ngModel)]="localProfileData.phone2"
            #phone2="ngModel"
            (input)="validatePhone('phone2')"
            class="bg-gray-950 w-full rounded-md border border-gray-600 p-3 text-white" />

          @if (phone2Error && (phone2.touched || phone2.dirty)) {
          <p class="text-white-400 mt-1 text-xs">{{ phone2Error }}</p>
          }
        </div>
      </div>
      }

      <!-- Website + Fax -->
      <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
        @if (isEditMode) {
        <div>
          <h3 class="text-sm font-medium text-white">Fax</h3>

          <input
            type="text"
            [(ngModel)]="localProfileData.fax"
            class="bg-gray-950 w-full rounded-md border border-gray-600 p-3 text-white" />
        </div>
        }

        <div>
          <h3 class="text-sm font-medium text-white">Website *</h3>

          <input
            type="url"
            name="website"
            required
            [(ngModel)]="localProfileData.website"
            #website="ngModel"
            class="bg-gray-950 w-full rounded-md border border-gray-600 p-3 text-white" />

          @if (website.invalid && (website.touched || website.dirty)) {
          <p class="text-white-400 mt-1 text-xs">Website is required.</p>
          }
        </div>
      </div>

      <!-- About Company -->
      <div>
        <h3 class="text-sm font-medium text-white">About Company *</h3>

        <textarea
          name="aboutCompany"
          required
          #aboutCompany="ngModel"
          [(ngModel)]="localProfileData.aboutCompany"
          rows="4"
          class="bg-gray-950 w-full rounded-md border border-gray-600 p-3 text-white"></textarea>

        @if (aboutCompany.invalid && (aboutCompany.touched || aboutCompany.dirty)) {
        <p class="text-white-400 text-xs">About company is required.</p>
        }
      </div>
    </div>
  </div>
</form>
